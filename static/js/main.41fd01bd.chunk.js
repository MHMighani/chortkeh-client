(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{193:function(e,t,a){e.exports=a(422)},321:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){},327:function(e,t,a){},419:function(e,t,a){},420:function(e,t,a){},421:function(e,t,a){},422:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),l=a(9),u=a(10),i=a(163),s=a(34),m=a(39),d=a(14),p=a(158),b=a(161),f=a(159),E=a(11),v=a.n(E),y=a(17),h=a(23),S=a(106),O=a.n(S),w=function(){var e=Object(h.a)(v.a.mark((function e(){var t,a,n,r,c,o,l,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://currency.jafari.pw/json",e.next=3,O.a.get("https://currency.jafari.pw/json");case 3:for(t=e.sent,a=t.data,n=!0,r=!1,c=void 0,e.prev=8,o=a.Item[Symbol.iterator]();!(n=(l=o.next()).done);n=!0)(u=l.value).Buy=u.Rate,delete u.Rate;e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),r=!0,c=e.t0;case 16:e.prev=16,e.prev=17,n||null==o.return||o.return();case 19:if(e.prev=19,!r){e.next=22;break}throw c;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.abrupt("return",a);case 25:case"end":return e.stop()}}),e,null,[[8,12,16,24],[17,,19,23]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(h.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.coindesk.com/v1/bpi/currentprice.json",e.next=3,O.a.get("https://api.coindesk.com/v1/bpi/currentprice.json");case 3:return t=e.sent,e.abrupt("return",t.data.bpi);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){return function(){var e=Object(h.a)(v.a.mark((function e(t){var a,n,r,c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return a=e.sent,e.next=5,j();case 5:n=e.sent,r=parseInt(n.USD.rate_float),c={Crypto:[{Currency:"BitCoin",Buy:r}]},o=Object(y.a)({},a,{},c),t({type:"GET_DAY_PRICE",payload:o});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=a(54),k=function(e){var t=e.error,a=e.touched;return t&&a?r.a.createElement("div",{className:"error-wraper"},t):null},T=function(e){var t=e.input,a=e.label,n=e.meta,c=e.type,o=void 0===c?"text":c;return r.a.createElement("div",{className:"col-wrapper"},r.a.createElement("div",{className:"input-wrapper"},r.a.createElement("input",Object.assign({min:"0",type:o},t,{autoComplete:"off"})),r.a.createElement("label",null,a)),r.a.createElement(k,{error:n.error,touched:n.touched}))},C=a(40),D=a(78),I=(a(122),Object(f.a)({form:"AddSourceForm",initialValues:{newSourceValue:1,newSourceName:"\u0628\u0648\u0631\u0633"},validate:function(e){var t={};return e.newSourceName?e.newSourceValue||(t.newSourceValue="\u0644\u0637\u0641\u0627 \u0627\u0631\u0632\u0634 \u0645\u0646\u0628\u0639 \u062c\u062f\u06cc\u062f \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f"):t.newSourceName="\u0644\u0637\u0641\u0627 \u0646\u0627\u0645 \u0645\u0646\u0628\u0639 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f",t}})(Object(l.b)(null,{addNewSource:function(e){return function(){var t=Object(h.a)(v.a.mark((function t(a,n){var r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),c=r.allTodayPrices,!(e.newSourceName in c)){t.next=3;break}return t.abrupt("return",1);case 3:a({type:"ADD_SOURCE",payload:e});case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}})((function(e){var t=e.handleSubmit,a=e.addNewSource,n=function(){var e=Object(h.a)(v.a.mark((function e(t){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:n=e.sent,c=n?"\u0627\u06cc\u0646 \u062f\u0627\u0631\u0627\u06cc\u06cc \u0642\u0628\u0644\u0627 \u062b\u0628\u062a \u0634\u062f\u0647 \u0627\u0633\u062a":"\u0646\u0627\u0645 \u062f\u0627\u0631\u0627\u06cc\u06cc \u062c\u062f\u06cc\u062f \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u062b\u0628\u062a \u0634\u062f",D.a.notify((function(){return r.a.createElement("div",{className:"toast ".concat(n?"warning":"success","-toast")},c)}),{duration:1500});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:t(n)},r.a.createElement("div",{className:"addsource-form"},r.a.createElement(p.a,{name:"newSourceName",label:"\u0646\u0627\u0645 \u0645\u0646\u0628\u0639 \u062c\u062f\u06cc\u062f",component:T}),r.a.createElement(p.a,{name:"newSourceValue",type:"number",label:"\u0627\u0631\u0632\u0634",component:T}),r.a.createElement("div",{className:"btn-wrapper"},r.a.createElement("button",{className:"button"},"\u062a\u0627\u06cc\u06cc\u062f"))))})))),_=a(33),P=function(){var e=Object(n.useState)(!1),t=Object(_.a)(e,2),a=t[0],r=t[1],c=function(e){a&&"Escape"===e.key&&r(!1)};return Object(n.useEffect)((function(){return window.addEventListener("keydown",c,!1),function(){window.removeEventListener("keydown",c,!1)}})),{isShowing:a,toggle:function(){r(!a)}}},x=(a(321),function(e){var t=e.isShowing,a=e.hide,n=e.children;return t?o.a.createPortal(r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-overlay"}),r.a.createElement("div",{className:"modal-wrapper",onClick:a,"aria-modal":!0,"aria-hidden":!0,tabIndex:-1,role:"dialog"},r.a.createElement("div",{className:"modal",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"modal-header"},r.a.createElement("button",{type:"button",className:"modal-close-button","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n))),document.body):null}),B=function(e){var t,a=e.input,n=e.label,c=e.meta,o=e.options,l=e.mainSource,u=P(),i=u.isShowing,s=u.toggle;return"others"===l&&"subSource"===a.name&&(t=r.a.createElement("button",{id:"add-source-btn",className:"button",onClick:s},r.a.createElement(C.a,{icon:"plus"}))),i?r.a.createElement(x,{isShowing:i,hide:s},r.a.createElement(I,null)):r.a.createElement("div",{className:"col-wrapper"},r.a.createElement("div",{className:"input-wrapper"},t,r.a.createElement("select",Object.assign({type:"select"},a),o),r.a.createElement("label",null,n)),r.a.createElement(k,{error:c.error,touched:c.touched}))},L=function(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):0},A=(a(322),function(e){var t,a=e.subSource,n=e.amount,c=0,o=Object(l.c)((function(e){return e.allTodayPrices}));return a&&(c=o[a].Buy),t=c*n,r.a.createElement("div",{id:"calculator",className:"form-section"},r.a.createElement("div",{className:"price-wrapper"},r.a.createElement("span",null,"\u0642\u06cc\u0645\u062a \u0631\u0648\u0632"),r.a.createElement("span",null,L(c))),r.a.createElement("div",{className:"price-wrapper"},r.a.createElement("div",null,r.a.createElement(C.a,{icon:"times"}))),r.a.createElement("div",{className:"price-wrapper"},r.a.createElement("span",null,"\u062a\u0639\u062f\u0627\u062f"),r.a.createElement("span",null,L(n))),r.a.createElement("div",{className:"price-wrapper"},r.a.createElement("hr",null)),r.a.createElement("div",{className:"price-wrapper"},r.a.createElement("div",null,r.a.createElement("div",{className:"unit-label"},"\u062a\u0648\u0645\u0627\u0646"),r.a.createElement("span",null,"\u0642\u06cc\u0645\u062a \u06a9\u0644")),r.a.createElement("span",null,L(t))))}),R=(a(323),Object(b.a)("addInventoryForm")),F=Object(f.a)({form:"addInventoryForm",validate:function(e){var t={};return e.mainSource?e.subSource?parseInt(e.amount)||(t.amount="\u0644\u0637\u0641\u0627 \u0645\u0642\u062f\u0627\u0631 \u062f\u0627\u0631\u0627\u06cc\u06cc \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f"):t.subSource="\u0644\u0637\u0641\u0627 \u0645\u0646\u0628\u0639 \u0631\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f":t.mainSource="\u0644\u0637\u0641\u0627 \u0645\u0646\u0628\u0639 \u0631\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f",t}})(Object(l.b)((function(e){return{inventoryLabels:e.inventoryLabels,labelTranslations:e.labelTranslations,mainSource:R(e,"mainSource"),subSource:R(e,"subSource"),amount:R(e,"amount")}}),{getDayPrice:N,change:m.a})((function(e){Object(n.useEffect)((function(){e.getDayPrice()}));var t=function(t){return t.map((function(t,a){return r.a.createElement("option",{key:a,value:t},e.labelTranslations[t])}))},a=e.handleSubmit,c=e.mainSource,o=e.subSource,l=e.amount,u=[""].concat(Object(d.a)(Object.keys(e.inventoryLabels))),i=c?[""].concat(Object(d.a)(e.inventoryLabels[c])):[""];return r.a.createElement("form",{onSubmit:a(e.onSubmit)},r.a.createElement("div",{className:"form-section"},r.a.createElement(p.a,{name:"mainSource",label:"\u0646\u0648\u0639 \u0645\u0646\u0628\u0639",component:B,options:t(u)}),r.a.createElement(p.a,{name:"subSource",label:"\u0646\u0648\u0639 ".concat(function(t){return"others"!==t&&t?"Crypto"===t?"\u0627\u0631\u0632":e.labelTranslations[t]:""}(c)),mainSource:e.mainSource,component:B,options:t(i)}),r.a.createElement(p.a,{name:"amount",label:"\u0645\u0642\u062f\u0627\u0631",type:"number",component:T})),r.a.createElement(A,{subSource:o,amount:l}),r.a.createElement("div",{className:"btn-wrapper"},r.a.createElement("button",{className:"button",id:"submit-btn",type:"submit"},"\u062a\u0627\u06cc\u06cc\u062f"),r.a.createElement(g.a,{className:"button",to:"".concat("/chortkeh-client"),id:"return-btn"},"\u0628\u0627\u0632\u06af\u0634\u062a")))}))),V=(a(325),Object(l.b)(null,{addToInventory:function(e){return function(){var t=Object(h.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"ADD_TO_INVENTORY",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.addToInventory;return r.a.createElement("div",{className:"form-page"},r.a.createElement(F,{onSubmit:function(e,a){t(e),a(Object(m.a)("addInventoryForm","amount","")),a(Object(m.b)("addInventoryForm","amount","")),D.a.notify((function(){return r.a.createElement("div",{className:"toast success-toast"},"\u0628\u0647 \u062f\u0627\u0631\u0627\u06cc\u06cc \u0627\u0636\u0627\u0641\u0647 \u0634\u062f")}),{duration:2e3})},initialValues:{amount:0,mainSource:"",subSource:""}}))}))),U=(a(326),function(){return r.a.createElement("div",{id:"no-inventory-warning"},r.a.createElement("p",null,"!\u0647\u0646\u0648\u0632 \u0686\u06cc\u0632\u06cc \u0628\u0647 \u062f\u0627\u0631\u0627\u06cc\u06cc \u0627\u0636\u0627\u0641\u0647 \u0646\u06a9\u0631\u062f\u0647 \u0627\u06cc\u062f"))}),z=function(e){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"\u0645\u0646\u0628\u0639"),r.a.createElement("th",{scope:"col"},"\u062a\u0639\u062f\u0627\u062f"),r.a.createElement("th",{scope:"col"},"\u0642\u06cc\u0645\u062a \u0631\u0648\u0632"),r.a.createElement("th",{scope:"col"},"\u0642\u06cc\u0645\u062a \u06a9\u0644"),r.a.createElement("th",{scope:"col"})))},G=Object(l.b)((function(e){return{inventory:e.inventoryList,todayPrices:e.allTodayPrices,labelTranslations:e.labelTranslations}}),{deleteFromInventory:function(e){return function(){var t=Object(h.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"DELETE_FROM_INVENTORY",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.inventory.map((function(t,a){var n=e.labelTranslations,c=e.todayPrices,o=e.deleteFromInventory,l=t.subSource,u=t.amount,i=c[l].Buy;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,n[l]),r.a.createElement("td",null,L(u)),r.a.createElement("td",null,L(i)),r.a.createElement("td",null,L(parseInt(u)*i)),r.a.createElement("td",null,r.a.createElement("button",{className:"button table-delete-btn",onClick:function(){return o(l)}},r.a.createElement("span",null,r.a.createElement(C.a,{icon:"times"}))),r.a.createElement("button",{className:"button success table-edit-btn"},r.a.createElement("span",null,r.a.createElement(C.a,{icon:"edit"})))))}));return r.a.createElement("tbody",null,t)})),Y=function(){var e=Object(l.c)((function(e){return e.allTodayPrices})),t=Object(l.c)((function(e){return e.inventoryList})).reduce((function(t,a){return t+e[a.subSource].Buy*a.amount}),0);return r.a.createElement("span",null,L(t))},J=(a(327),function(){return r.a.createElement("table",null,r.a.createElement(z,null),r.a.createElement(G,null),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{id:"all-value",colSpan:"2"},Y()))))}),M=a(166),X=a(168),q=a.n(X),W=function(e){var t=e.values,a={labels:e.labels,datasets:[{label:"# of Votes",data:t,backgroundColor:q()({count:6}),borderWidth:1}]};return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{data:a,options:{maintainAspectRatio:!1,legend:{labels:{fontSize:22}}}}))},H=function(e){var t=e.chartFormatToggle;return r.a.createElement("form",null,r.a.createElement("select",{name:"chart-filter",onChange:function(e){return t(e.target.value)}},r.a.createElement("option",{value:"subSource"},"\u0645\u0646\u0628\u0639"),r.a.createElement("option",{value:"mainSource"},"\u0646\u0648\u0639 \u0645\u0646\u0628\u0639")),r.a.createElement("label",{htmlFor:"chart-filter"},"  \u0646\u0645\u0648\u062f\u0627\u0631 \u0628\u0631\u0627\u0633\u0627\u0633"))},K=(a(419),Object(l.b)((function(e){return{allTodayPrices:e.allTodayPrices,inventoryList:e.inventoryList,labelTranslations:e.labelTranslations}}),{})((function(e){var t=Object(n.useState)("subSource"),a=Object(_.a)(t,2),c=a[0],o=a[1],l=function(){var t={};return e.inventoryList.forEach((function(a){var n=e.labelTranslations[a[c]],r=+e.allTodayPrices[a.subSource].Buy*+a.amount;n in t?t[n]+=r:t[n]=r})),[Object.keys(t),Object.values(t)]}(),u=Object(_.a)(l,2),i=u[0],s=u[1];return e.inventoryList.length?r.a.createElement("div",{className:"chart-page"},r.a.createElement(H,{chartFormatToggle:o}),r.a.createElement("div",{className:"chart-container"},r.a.createElement(W,{allTodayPrices:e.allTodayPrices,values:s,labels:i,labelTranslations:e.labelTranslations}))):null}))),Q=(a(420),Object(l.b)((function(e){return{inventoryList:e.inventoryList}}),{getDayPrice:N})((function(e){var t=e.getDayPrice,a=e.inventoryList;Object(n.useEffect)((function(){t()}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"inventory-page"},a.length?r.a.createElement(J,null):r.a.createElement(U,null),r.a.createElement(g.a,{className:"button",id:"addInventoryLink",to:"/chortkeh-client/addInventory"},"\u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646 \u062f\u0627\u0631\u0627\u06cc\u06cc")),r.a.createElement(K,null))}))),Z=a(15),$=Object(Z.a)(),ee=a(56),te=a(80);a(421);ee.b.add(te.c,te.a,te.b);var ae=function(){return r.a.createElement("div",{id:"app"},r.a.createElement(s.b,{history:$},r.a.createElement(s.a,{exact:!0,path:"/chortkeh-client/",component:Q}),r.a.createElement(s.a,{exact:!0,path:"/chortkeh-client/addInventory",component:V}),r.a.createElement(s.a,{exact:!0,path:"/chortkeh-client/addSource",component:I})))},ne=a(160),re=a(13),ce=a(58),oe=a.n(ce),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_INVENTORY":var a=e.find((function(e){return e.subSource===t.payload.subSource}));return a?e.map((function(e){return e.subSource===a.subSource?Object(y.a)({},e,{amount:t.payload.amount}):e})):[].concat(Object(d.a)(e),[t.payload]);case"DELETE_FROM_INVENTORY":var n=e.filter((function(e){return e.subSource!==t.payload}));return n;default:return e}},ue=Object(u.c)({form:ne.a,inventoryLabels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a={Gold:["Gold 18","1 Emami","1 Old Azadi","1/2 Azadi","1/4 Azadi"],Currency:["US Dollar","Euro","British Pound","Canadian Dollar"],Crypto:["BitCoin"],others:[]};if(!Object.keys(e).length)return Object(y.a)({},e,{},a);switch(t.type){case"ADD_SOURCE":return Object(y.a)({},e,{others:[].concat(Object(d.a)(e.others),[t.payload.newSourceName])});default:return e}},labelTranslations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a={Gold:"\u0637\u0644\u0627","Gold 18":"\u0637\u0644\u0627 \u06af\u0631\u0645\u06cc \u06f1\u06f8 \u0639\u06cc\u0627\u0631","1 Emami":"\u062a\u0645\u0627\u0645 \u0633\u06a9\u0647","1 Old Azadi":"\u062a\u0645\u0627\u0645 \u0633\u06a9\u0647 \u0637\u0631\u062d \u0642\u062f\u06cc\u0645","1/2 Azadi":"\u0646\u06cc\u0645 \u0633\u06a9\u0647","1/4 Azadi":"\u0631\u0628\u0639 \u0633\u06a9\u0647",Currency:"\u0627\u0631\u0632","US Dollar":"\u062f\u0644\u0627\u0631 \u0622\u0645\u0631\u06cc\u06a9\u0627",Euro:"\u06cc\u0648\u0631\u0648","British Pound":"\u067e\u0648\u0646\u062f \u0627\u0646\u06af\u0644\u06cc\u0633","Canadian Dollar":"\u062f\u0644\u0627\u0631 \u06a9\u0627\u0646\u0627\u062f\u0627",Crypto:"\u0627\u0631\u0632 \u062f\u06cc\u062c\u06cc\u062a\u0627\u0644",BitCoin:"\u0628\u06cc\u062a \u06a9\u0648\u06cc\u0646",others:"\u062f\u06cc\u06af\u0631 \u0645\u0646\u0627\u0628\u0639"};if(!Object.keys(e).length)return Object(y.a)({},e,{},a);switch(t.type){case"ADD_SOURCE":var n=t.payload.newSourceName;return Object(y.a)({},e,Object(re.a)({},n,n));default:return e}},allTodayPrices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DAY_PRICE":var a=oe.a.keyBy(t.payload.Currency,"Currency"),n=Object(y.a)({},oe.a.keyBy(t.payload.Gold,"Coin"),{},oe.a.keyBy(t.payload.Item,"Name")),r=oe.a.keyBy(t.payload.Crypto,"Currency");r.BitCoin.Buy=r.BitCoin.Buy*a["US Dollar"].Buy;var c=Object(y.a)({},e,{},a,{},n,{},r);return c;case"ADD_SOURCE":return Object(y.a)({},e,{},Object(re.a)({},t.payload.newSourceName,{Buy:parseInt(t.payload.newSourceValue)}));default:return e}},inventoryList:le}),ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,se=function(){var e=localStorage.getItem("state");try{if(null===e)return;return JSON.parse(e)}catch(t){return}}(),me=Object(u.e)(ue,se,ie(Object(u.a)(i.a)));me.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){}}(me.getState())})),o.a.render(r.a.createElement(l.a,{store:me},r.a.createElement(ae,null)),document.querySelector("#root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.41fd01bd.chunk.js.map